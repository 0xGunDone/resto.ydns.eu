# План улучшения структуры навигации

## Проблемы текущей реализации

1. **Плоская структура меню** - все пункты на одном уровне
2. **Нет контекста ресторана** - непонятно, для какого ресторана показываются разделы
3. **Нет группировки** - все пункты в одном списке
4. **Сложная логика** - трудно понять, что доступно пользователю

## Предлагаемая структура

### Концепция: Группированное меню с контекстом

```
┌─────────────────────────────────────────┐
│  🏢 Resto                        [🔔] [👤] │
├─────────────────────────────────────────┤
│  📊 Главная                              │
│  🏢 Рестораны   [Ресторан: Ла Пиацца ▼] │
├─────────────────────────────────────────┤
│  📅 Расписание                           │
│  ✅ Задачи                               │
│  📋 Табели                               │
├─────────────────────────────────────────┤
│  ⚙️ Управление ▼                         │
│    • Сотрудники                         │
│    • Должности                          │
│    • Отделы                             │
│    • Типы смен                          │
└─────────────────────────────────────────┘
```

## Логика отображения

### 1. Группировка разделов

#### Группа "Основное"
- **Главная** - всегда доступна всем
- **Рестораны** - для OWNER/ADMIN или с правом VIEW_RESTAURANTS

#### Группа "Рабочие разделы" (требуют контекст ресторана)
- **График** - VIEW_SCHEDULE или EDIT_SCHEDULE
- **Задачи** - VIEW_OWN_TASKS или VIEW_ALL_TASKS или EDIT_TASKS
- **Табели** - VIEW_OWN_TIMESHEETS или VIEW_ALL_TIMESHEETS или EDIT_TIMESHEETS

#### Группа "Управление" (требуют права управления)
- **Сотрудники** - VIEW_EMPLOYEES или EDIT_EMPLOYEES
- **Должности** - VIEW_POSITIONS или EDIT_POSITIONS
- **Отделы** - VIEW_DEPARTMENTS или EDIT_DEPARTMENTS
- **Типы смен** - VIEW_SHIFT_TYPES или EDIT_SHIFT_TYPES

### 2. Контекст ресторана

**Вариант A: Автоматический выбор**
- Если пользователь работает только в одном ресторане → автоматически выбираем его
- Если в нескольких → показываем селектор

**Вариант B: Явный выбор**
- Всегда показываем селектор ресторанов
- Разделы показываются для выбранного ресторана

### 3. Правила видимости

1. **OWNER/ADMIN**: Видят все разделы всегда
2. **MANAGER**: Видят все разделы для своего ресторана
3. **EMPLOYEE**: Видят только те разделы, на которые есть права

## Предлагаемая реализация

### Шаг 1: Создать конфигурацию навигации

Вынести всю логику навигации в отдельный файл конфигурации.

### Шаг 2: Добавить контекст ресторана

Создать компонент `RestaurantSelector` и сохранять выбранный ресторан в localStorage.

### Шаг 3: Обновить Navbar

Использовать новую конфигурацию с группировкой разделов.

### Шаг 4: Адаптировать страницы

Передавать `restaurantId` через URL параметры или контекст.

## Варианты UI

### Вариант 1: Горизонтальное меню с выпадающими (рекомендуется)

```
[Главная] [Рестораны ▼] [График] [Задачи] [Табели] [Управление ▼]
                                                         └─ Сотрудники
                                                         └─ Должности
                                                         └─ Отделы
```

### Вариант 2: Боковое меню (для больших экранов)

```
┌────────────┐
│  Resto     │
├────────────┤
│ 📊 Главная │
│ 🏢 Рестораны│
│            │
│ 📅 График  │
│ ✅ Задачи  │
│ 📋 Табели  │
│            │
│ ⚙️ Управл.▼│
│  • Сотрудн.│
│  • Должн.  │
└────────────┘
```

### Вариант 3: Комбинированный (текущий + улучшения)

- Десктоп: горизонтальное меню
- Мобильный: боковое выдвижное меню

## Примеры по ролям

### OWNER
```
✅ Главная
✅ Рестораны (селектор всех ресторанов)
✅ График (для выбранного ресторана)
✅ Задачи (для выбранного ресторана)
✅ Табели (для выбранного ресторана)
✅ Управление ▼
   ✅ Сотрудники
   ✅ Должности
   ✅ Отделы
   ✅ Типы смен
```

### MANAGER одного ресторана
```
✅ Главная
✅ Рестораны (только свой ресторан)
✅ График
✅ Задачи
✅ Табели
✅ Управление ▼
   ✅ Сотрудники
   ✅ Должности
   ✅ Отделы
   ✅ Типы смен
```

### EMPLOYEE с базовыми правами
```
✅ Главная
✅ График (просмотр)
✅ Задачи (только свои)
✅ Табели (только свои)
❌ Управление (недоступно)
```

## Рекомендации

1. **Простота** - не перегружать меню
2. **Ясность** - всегда показывать, в каком ресторане работаешь
3. **Группировка** - логично объединять связанные разделы
4. **Адаптивность** - работать на всех устройствах

