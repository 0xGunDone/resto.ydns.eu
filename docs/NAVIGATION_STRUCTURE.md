# Структура навигации приложения Resto

## Концепция

Навигация должна быть логичной, понятной и учитывать:
- **Роли пользователей** (OWNER, ADMIN, MANAGER, EMPLOYEE)
- **Права доступа** (permissions-based)
- **Контекст ресторана** (multi-restaurant support)
- **Группировку по функциональности**

## Структура меню

### 1. Уровень приложения (глобальный)

#### Главная (Dashboard)
- **Доступ**: Все
- **Описание**: Общая панель управления, статистика
- **Права**: Не требуются

#### Рестораны (Restaurants)
- **Доступ**: OWNER, ADMIN, или пользователи с `VIEW_RESTAURANTS`
- **Описание**: Список всех ресторанов
- **Права**: `VIEW_RESTAURANTS`
- **Особенность**: Для OWNER/ADMIN - список всех ресторанов
  Для других - только рестораны, где пользователь является сотрудником

---

### 2. Уровень ресторана (контекстный)

После выбора ресторана или при работе внутри ресторана:

#### График (Schedule)
- **Доступ**: Сотрудники ресторана
- **Права**: `VIEW_SCHEDULE` или `EDIT_SCHEDULE`
- **Описание**: Просмотр и управление графиком смен

#### Задачи (Tasks)
- **Доступ**: Сотрудники ресторана
- **Права**: `VIEW_OWN_TASKS` или `VIEW_ALL_TASKS` или `EDIT_TASKS`
- **Описание**: Управление задачами
- **Особенность**: 
  - С `VIEW_OWN_TASKS` - только свои задачи
  - С `VIEW_ALL_TASKS` - все задачи ресторана

#### Табели (Timesheets)
- **Доступ**: Сотрудники ресторана
- **Права**: `VIEW_OWN_TIMESHEETS` или `VIEW_ALL_TIMESHEETS` или `EDIT_TIMESHEETS`
- **Описание**: Просмотр и управление табелями
- **Особенность**:
  - С `VIEW_OWN_TIMESHEETS` - только свои табели
  - С `VIEW_ALL_TIMESHEETS` - все табели ресторана

---

### 3. Уровень управления рестораном

Доступен только для пользователей с правами управления:

#### Управление рестораном (Restaurant Management)
- **Доступ**: OWNER, ADMIN, MANAGER ресторана, или с `EDIT_EMPLOYEES`
- **Описание**: Управление сотрудниками, должностями, отделами
- **Права**: `VIEW_EMPLOYEES` или `EDIT_EMPLOYEES`
- **Подразделы**:
  - Сотрудники (Employees)
  - Должности (Positions)
  - Отделы (Departments)
  - Типы смен (Shift Types)

---

## Предлагаемая структура меню

### Вариант 1: Группированное меню (рекомендуется)

```
┌─────────────────────────────────────┐
│ 📊 Главная                          │
├─────────────────────────────────────┤
│ 🏢 Рестораны                        │
│   └─ [Выбранный ресторан]          │
├─────────────────────────────────────┤
│ 📅 Расписание                       │
│   • График смен                     │
│   • Типы смен                       │
├─────────────────────────────────────┤
│ ✅ Задачи                           │
├─────────────────────────────────────┤
│ 📋 Табели                           │
├─────────────────────────────────────┤
│ ⚙️ Управление                       │
│   • Сотрудники                      │
│   • Должности                       │
│   • Отделы                          │
└─────────────────────────────────────┘
```

### Вариант 2: Контекстное меню (более продвинутый)

Меню меняется в зависимости от контекста:

**Глобальный контекст** (нет выбранного ресторана):
- Главная
- Рестораны

**Контекст ресторана** (выбран ресторан):
- Главная
- График
- Задачи
- Табели
- Управление (если есть права)

---

## Логика отображения

### Группировка разделов

1. **Главная** - всегда доступна
2. **Рестораны** - для OWNER/ADMIN или с VIEW_RESTAURANTS
3. **Рабочие разделы** (График, Задачи, Табели) - для сотрудников ресторана
4. **Управление** - для менеджеров и администраторов

### Правила показа пунктов

1. Если пользователь работает только в одном ресторане:
   - Показать все доступные разделы сразу
   - Не требовать выбор ресторана

2. Если пользователь работает в нескольких ресторанах:
   - Показать переключатель ресторанов
   - Показать разделы для выбранного ресторана

3. Если у пользователя нет доступа к ресторанам:
   - Показать только "Главная" и "Профиль"

---

## Реализация

### Структура данных для меню

```typescript
interface MenuItem {
  id: string;
  name: string;
  href: string;
  icon: React.ComponentType;
  requiredPermissions?: string[];
  requireRole?: string[];
  requireContext?: 'restaurant' | 'global';
  children?: MenuItem[];
  category?: string;
}

interface MenuCategory {
  id: string;
  name: string;
  icon?: React.ComponentType;
  items: MenuItem[];
  collapsible?: boolean;
}
```

### Группы меню

1. **Основные разделы**
   - Главная
   - Рестораны

2. **Рабочие разделы** (требуют контекст ресторана)
   - График
   - Задачи
   - Табели

3. **Управление** (требуют права управления)
   - Сотрудники
   - Должности
   - Отделы
   - Типы смен

---

## Рекомендации по UX

1. **Ясность**: Пользователь всегда должен понимать, в каком контексте он находится
2. **Группировка**: Логично группировать связанные разделы
3. **Визуальные индикаторы**: Показывать активный раздел и контекст ресторана
4. **Адаптивность**: Меню должно работать на мобильных устройствах
5. **Прогрессивное раскрытие**: Скрывать сложные разделы до необходимости

---

## Примеры навигации по ролям

### OWNER/ADMIN
```
✅ Главная
✅ Рестораны (все)
✅ График (во всех ресторанах)
✅ Задачи (во всех ресторанах)
✅ Табели (во всех ресторанах)
✅ Управление (во всех ресторанах)
```

### MANAGER конкретного ресторана
```
✅ Главная
✅ Рестораны (только свой)
✅ График (свой ресторан)
✅ Задачи (свой ресторан)
✅ Табели (свой ресторан)
✅ Управление (свой ресторан)
```

### EMPLOYEE с базовыми правами
```
✅ Главная
✅ График (просмотр)
✅ Задачи (только свои)
✅ Табели (только свои)
❌ Управление (нет доступа)
```

