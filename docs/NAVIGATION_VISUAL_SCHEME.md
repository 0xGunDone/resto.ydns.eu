# Визуальная схема навигации

## Концепция: Простая и понятная структура

### Структура меню по уровням важности

```
┌─────────────────────────────────────────────────────────────┐
│                    NAVIGATION BAR                            │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  УРОВЕНЬ 1: ОСНОВНОЕ                                         │
│  ┌──────────┐  ┌──────────┐                                │
│  │ Главная  │  │Рестораны │                                │
│  └──────────┘  └──────────┘                                │
│                                                               │
│  УРОВЕНЬ 2: РАБОТА (для ресторана)                          │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐                 │
│  │ График   │  │ Задачи   │  │ Табели   │                 │
│  └──────────┘  └──────────┘  └──────────┘                 │
│                                                               │
│  УРОВЕНЬ 3: УПРАВЛЕНИЕ                                       │
│  ┌────────────────────────┐                                 │
│  │ Управление ▼            │                                 │
│  │   • Сотрудники         │                                 │
│  │   • Должности          │                                 │
│  │   • Отделы             │                                 │
│  │   • Типы смен          │                                 │
│  └────────────────────────┘                                 │
│                                                               │
└─────────────────────────────────────────────────────────────┘
```

## Логика отображения пунктов

### Для OWNER/ADMIN
```
✅ Все разделы всегда видны
✅ Селектор ресторанов (все рестораны)
✅ Все разделы работают для выбранного ресторана
```

### Для MANAGER
```
✅ Главная
✅ Рестораны (только свой ресторан, без селектора)
✅ График
✅ Задачи
✅ Табели
✅ Управление (все подразделы)
```

### Для EMPLOYEE
```
✅ Главная
✅ График (просмотр)
✅ Задачи (только свои)
✅ Табели (только свои)
❌ Управление (скрыто)
```

## Группировка в меню

### Группа 1: Основное (всегда видно)
- Главная
- Рестораны (если есть доступ)

### Группа 2: Рабочие разделы (требуют ресторан)
- График
- Задачи  
- Табели

### Группа 3: Управление (требуют права)
- Сотрудники (в подменю)
- Должности (в подменю)
- Отделы (в подменю)
- Типы смен (в подменю)

## Контекст ресторана

### Автоматический режим
```
IF количество_ресторанов == 1:
  автоматически_выбрать(ресторан)
  не_показывать_селектор()
ELSE:
  показать_селектор_ресторанов()
  использовать_выбранный_ресторан()
```

### Сохранение выбора
- Выбранный ресторан сохраняется в localStorage
- При возврате на сайт - автоматически выбирается последний ресторан

## Правила видимости

```typescript
function shouldShowMenuItem(item, user, permissions, restaurantContext) {
  // 1. Проверка роли
  if (item.requireRole && !item.requireRole.includes(user.role)) {
    return false;
  }
  
  // 2. Проверка прав
  if (item.requiredPermissions && !hasAnyPermission(item.requiredPermissions)) {
    return false;
  }
  
  // 3. Проверка контекста ресторана
  if (item.requireContext === 'restaurant' && !restaurantContext) {
    return false;
  }
  
  return true;
}
```

## Предлагаемый UI

### Вариант A: Горизонтальное меню (текущий стиль, улучшенный)
```
[Главная] [Рестораны] [График] [Задачи] [Табели] [Управление ▼]
                                                      └─ Сотрудники
                                                      └─ Должности
                                                      └─ Отделы
                                                      └─ Типы смен
```

### Вариант B: Группированное меню (новый стиль)
```
Основное:
  [Главная] [Рестораны]

Работа:
  [График] [Задачи] [Табели]

Управление:
  [Управление ▼]
    • Сотрудники
    • Должности
    • Отделы
    • Типы смен
```

## Рекомендации

1. **Минимум уровней** - максимум 2 уровня вложенности
2. **Визуальные разделители** - между группами разделов
3. **Иконки** - для быстрой ориентации
4. **Активное состояние** - четко показывать текущий раздел
5. **Адаптивность** - мобильное меню должно быть удобным

